@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

Person(user, "User")
Container(apiGateway, "API Gateway", "Routes requests to microservices + auth")

Rel(user, apiGateway, "Sends requests")

System_Boundary(publicationSystem, "publication system") {
    Container(publicationService, "publication Service", "")
    
}

ContainerDb(publicationDB, "SQL")
    
ContainerQueue(publicationQueue, "Publication queue", "Rabbit", "Message queue")
ContainerQueue(filesSystem, "Files System", "Storages images")

Rel(publicationService, publicationDB, "")
Rel(publicationSystem, publicationQueue, "Publish new post to queue for filling feed")
Rel(publicationSystem, filesSystem, "Uplaod images")

Rel(apiGateway, publicationSystem, "Route")
@enduml
